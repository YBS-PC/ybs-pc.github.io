<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CloudX — современный файлообменник (заглушка)</title>
<meta name="description" content="Демонстрационная заглушка современного файлообменника — интерфейс, прогресс, список файлов и публичные ссылки.">
<!-- Стили: современный минимализм, CSS-переменные, адаптивность -->
<style>
  :root{
    --bg: #0f1720;
    --card: #0f1728;
    --muted: #9aa4b2;
    --accent: #7c5cff;
    --glass: rgba(255,255,255,0.04);
    --success: #22c55e;
    --danger: #ff6b6b;
    --radius: 12px;
    --ui-padding: 18px;
    color-scheme: dark;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  /* Лёгкая светлая тема через data-theme */
  :root[data-theme="light"]{
    --bg: #f6f8fb;
    --card: #ffffff;
    --muted: #556070;
    --accent: #4f46e5;
    --glass: rgba(0,0,0,0.04);
    --success: #16a34a;
    --danger: #dc2626;
    color-scheme: light;
  }

  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#08101a);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
  .app{max-width:1200px;margin:32px auto;padding:24px;display:grid;grid-template-columns:1fr 380px;gap:24px;}
  header{display:flex;align-items:center;gap:16px;margin-bottom:14px;}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:48px;height:48px;background:linear-gradient(135deg,var(--accent),#00d4ff);border-radius:10px;display:flex;align-items:center;justify-content:center;color:white;font-weight:700;}
  h1{font-size:1.1rem;margin:0;color:var(--muted);opacity:0.95}
  .hero{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:var(--ui-padding);border-radius:var(--radius);backdrop-filter: blur(6px);box-shadow: 0 6px 30px rgba(2,6,23,0.6);}

  /* Upload area */
  .upload-area{display:flex;flex-direction:column;gap:14px;}
  .dropzone{border:1px dashed rgba(255,255,255,0.06);padding:22px;border-radius:10px;display:flex;align-items:center;gap:16px;cursor:pointer;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.01));transition:all .18s}
  .dropzone:hover{transform:translateY(-3px);box-shadow:0 8px 30px rgba(2,6,23,0.5)}
  .dz-left{display:flex;flex-direction:column;gap:6px}
  .dz-title{font-weight:600;color:white}
  .dz-sub{color:var(--muted);font-size:0.9rem}
  .dz-btn{padding:8px 12px;border-radius:8px;background:linear-gradient(90deg,var(--accent),#00d4ff);color:white;border:none;cursor:pointer;font-weight:600}
  input[type=file]{display:none}

  /* Fake progress list */
  .uploads{margin-top:8px;display:flex;flex-direction:column;gap:10px}
  .upload-item{background:var(--card);border-radius:10px;padding:10px;display:flex;align-items:center;gap:12px;box-shadow:0 6px 16px rgba(2,6,23,0.35)}
  .u-main{flex:1}
  .filename{font-weight:600;color:white}
  .filesize{color:var(--muted);font-size:0.85rem}
  .bar-wrap{height:8px;background:var(--glass);border-radius:8px;margin-top:8px;overflow:hidden}
  .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#00d4ff);transition:width .3s ease}

  /* Files grid */
  .files{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:16px}
  .file-card{background:var(--card);border-radius:12px;padding:12px;display:flex;gap:12px;align-items:center}
  .thumb{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#111827,#0f1728);display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:700}
  .meta{flex:1}
  .meta .title{font-weight:700;color:white}
  .meta .meta-line{color:var(--muted);font-size:0.85rem;margin-top:6px}
  .actions{display:flex;gap:8px}
  .btn{padding:8px 10px;border-radius:9px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);cursor:pointer;font-weight:600}
  .btn.primary{background:linear-gradient(90deg,var(--accent),#00d4ff);color:white;border:none}

  /* Sidebar */
  aside{position:relative}
  .panel{background:var(--card);padding:18px;border-radius:12px;display:flex;flex-direction:column;gap:12px}
  .stat{display:flex;gap:12px;align-items:center}
  .stat .num{font-size:1.4rem;font-weight:800;color:white}
  .small{color:var(--muted);font-size:0.9rem}
  .search{display:flex;gap:8px;align-items:center}
  .search input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:white}
  .tiny{font-size:0.85rem;color:var(--muted)}

  /* Notifications */
  .toast{position:fixed;right:20px;bottom:20px;display:flex;flex-direction:column;gap:10px;z-index:1000}
  .toast-item{background:#0b1220;color:white;padding:12px;border-radius:10px;box-shadow:0 6px 20px rgba(2,6,23,0.6)}

  /* Responsive */
  @media (max-width:980px){.app{grid-template-columns:1fr;padding:16px}.files{grid-template-columns:1fr}aside{order:-1}}
</style>
</head>
<body>
  <div style="max-width:1200px;margin:20px auto;padding:12px;">
    <!-- Заголовок и бренд -->
    <header class="brand">
      <div class="logo" aria-hidden="true">CX</div>
      <div>
        <h1>CloudX — демонстрационная заглушка</h1>
        <div class="tiny">Интерфейс: загрузка, список, ссылки — всё локально и безопасно</div>
      </div>
    </header>

    <main class="app">
      <!-- Левый основной блок -->
      <section class="hero">
        <div class="upload-area">
          <!-- Область перетаскивания -->
          <label class="dropzone" id="dropzone" tabindex="0" aria-label="Загрузить файлы">
            <div class="dz-left">
              <div class="dz-title">Перетащите файлы сюда или нажмите «Выбрать»</div>
              <div class="dz-sub">Поддерживаются любые форматы. Для этой демо-страницы файлы не отправляются.</div>
            </div>
            <div style="margin-left:auto">
              <input id="fileInput" type="file" multiple>
              <button class="dz-btn" id="chooseBtn" type="button">Выбрать</button>
            </div>
          </label>

          <!-- Активные "загрузки" (симуляция) -->
          <div class="uploads" id="uploads"></div>

          <!-- Раздел с файлами (фиктивная библиотека) -->
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
            <div class="tiny">Последние файлы</div>
            <div class="tiny" id="countText">0 файлов</div>
          </div>

          <div class="files" id="filesGrid" aria-live="polite"></div>
        </div>
      </section>

      <!-- Правая панель -->
      <aside>
        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="small">Статистика (симуляция)</div>
              <div class="stat"><div class="num" id="statFiles">0</div><div class="small">файлов</div></div>
            </div>
            <div style="text-align:right">
              <div class="small">Тема</div>
              <select id="themeSwitch" aria-label="Выбор темы" style="padding:6px;border-radius:8px;background:transparent;color:var(--muted)">
                <option value="dark">Тёмная</option>
                <option value="light">Светлая</option>
              </select>
            </div>
          </div>

          <div>
            <div class="small">Поиск</div>
            <div class="search">
              <input id="searchInput" placeholder="По названию или расширению..." />
              <button class="btn" id="clearSearch">Сброс</button>
            </div>
          </div>

          <div>
            <div class="small">Поделиться (демо)</div>
            <div style="display:flex;gap:8px">
              <button class="btn" id="publicLinkBtn">Создать ссылку</button>
              <button class="btn" id="resetBtn">Очистить</button>
            </div>
            <div id="linkArea" class="tiny" style="margin-top:8px;color:var(--muted)"></div>
          </div>

          <div style="margin-top:6px">
            <div class="small">Описание</div>
            <div class="tiny" style="color:var(--muted)">
              Эта страница — визуальная демоверсия интерфейса обмена файлами. Никакие данные не покидают ваш браузер.
            </div>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- Тосты -->
  <div class="toast" id="toasts" aria-live="polite" aria-atomic="true"></div>

<script>
/*
  demo-file-exchange.js
  Полная логика симуляции: выбор файлов, "загрузка" с прогрессом, создание фейковой публичной ссылки,
  управление списком, поиск и очистка. Всё в одном файле для простоты.
*/

(function(){
  // DOM элементы
  const dropzone = document.getElementById('dropzone');
  const fileInput = document.getElementById('fileInput');
  const chooseBtn = document.getElementById('chooseBtn');
  const uploads = document.getElementById('uploads');
  const filesGrid = document.getElementById('filesGrid');
  const statFiles = document.getElementById('statFiles');
  const countText = document.getElementById('countText');
  const searchInput = document.getElementById('searchInput');
  const clearSearch = document.getElementById('clearSearch');
  const publicLinkBtn = document.getElementById('publicLinkBtn');
  const linkArea = document.getElementById('linkArea');
  const resetBtn = document.getElementById('resetBtn');
  const toasts = document.getElementById('toasts');
  const themeSwitch = document.getElementById('themeSwitch');

  // Хранилище фиктивных файлов (в памяти)
  let files = [];

  // Небольшая утилита для форматирования размера
  function formatBytes(bytes){
    if(bytes === 0) return '0 B';
    const k = 1024;
    const sizes = ['B','KB','MB','GB','TB'];
    const i = Math.floor(Math.log(bytes)/Math.log(k));
    return parseFloat((bytes / Math.pow(k,i)).toFixed(2)) + ' ' + sizes[i];
  }

  // Генерируем фейковый ID и фейковую публичную ссылку
  function makeId(len=8){
    const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
    let s = '';
    for(let i=0;i<len;i++) s += chars[Math.floor(Math.random()*chars.length)];
    return s;
  }
  function makeFakeLink(id){
    return `https://cloudx.example/share/${id}`;
  }

  // Отображение тоста
  function toast(text){
    const el = document.createElement('div');
    el.className = 'toast-item';
    el.textContent = text;
    toasts.appendChild(el);
    setTimeout(()=> el.style.opacity = '0.0', 3200);
    setTimeout(()=> el.remove(), 3800);
  }

  // Добавить "файл" в библиотеку (после симуляции загрузки)
  function addFile({name,size,type,thumb}){
    const id = makeId(10);
    const f = {
      id, name, size, type, thumb: thumb || null,
      createdAt: new Date().toISOString(),
      downloads: Math.floor(Math.random()*2400)
    };
    files.unshift(f);
    renderFiles();
    toast(`Файл «${name}» готов.`);
  }

  // Рендер карточек файлов
  function renderFiles(filter=''){
    // простой поиск по имени/расширению
    const q = filter.trim().toLowerCase();
    const list = files.filter(f => !q || f.name.toLowerCase().includes(q));
    filesGrid.innerHTML = '';
    list.forEach(f => {
      const card = document.createElement('div');
      card.className = 'file-card';
      card.innerHTML = `
        <div class="thumb" aria-hidden="true">${getThumbText(f.name)}</div>
        <div class="meta">
          <div class="title">${escapeHtml(f.name)}</div>
          <div class="meta-line">${formatBytes(f.size)} • ${new Date(f.createdAt).toLocaleString()}</div>
        </div>
        <div class="actions">
          <button class="btn" data-id="${f.id}" data-action="copy">Копировать</button>
          <button class="btn primary" data-id="${f.id}" data-action="download">Скачать</button>
        </div>
      `;
      filesGrid.appendChild(card);
    });
    statFiles.textContent = files.length;
    countText.textContent = `${files.length} файлов`;
    // подключаем обработчики для кнопок внутри карточек
    filesGrid.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click', onCardAction);
    });
  }

  // Получаем заглавные буквы для превью
  function getThumbText(name){
    const parts = name.split('.');
    const main = parts[0] || name;
    return main.slice(0,2).toUpperCase();
  }

  // Экранируем HTML в текст
  function escapeHtml(s){ return s.replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

  // Обработчик кнопок в карточках
  function onCardAction(e){
    const id = e.currentTarget.dataset.id;
    const action = e.currentTarget.dataset.action;
    const f = files.find(x=>x.id===id);
    if(!f) return;
    if(action === 'download'){
      // В демо — показываем модал или тост с ссылкой
      const link = makeFakeLink(id);
      toast(`Ссылка для скачивания: ${link}`);
      // имитация увеличения счётчика скачиваний
      f.downloads += 1;
    } else if(action === 'copy'){
      const link = makeFakeLink(id);
      navigator.clipboard?.writeText(link).then(()=> {
        toast('Ссылка скопирована в буфер обмена');
      }).catch(()=> {
        toast('Не удалось скопировать ссылку — скопируйте вручную: ' + link);
      });
    }
  }

  // Симулированная "загрузка" файлов: создаём прогресс элемент и плавно увеличиваем значение
  function simulateUpload(selectedFiles){
    Array.from(selectedFiles).forEach(file=>{
      // Создаём визуальную карточку загрузки
      const item = document.createElement('div');
      item.className = 'upload-item';
      item.innerHTML = `
        <div class="u-main">
          <div class="filename">${escapeHtml(file.name)}</div>
          <div class="filesize">${formatBytes(file.size)}</div>
          <div class="bar-wrap"><div class="bar"></div></div>
        </div>
        <div style="min-width:80px;text-align:right">
          <div class="tiny" style="color:var(--muted)">0%</div>
        </div>
      `;
      uploads.prepend(item);

      const bar = item.querySelector('.bar');
      const pct = item.querySelector('.tiny');

      // Имитация прогресса: скорость зависит от файла
      let progress = 0;
      const speedFactor = Math.max(10, Math.min(1200, file.size / 1024)); // юниты для вариации
      const interval = setInterval(()=>{
        // прогресс растёт нелинейно
        progress += Math.random() * (1 + 1000 / speedFactor);
        if(progress >= 100){
          progress = 100;
          clearInterval(interval);
          // добавляем в библиотеку (без реального контента)
          addFile({name: file.name, size: file.size, type: file.type});
          // удаляем элемент прогресса через 600ms
          setTimeout(()=> item.remove(), 600);
        }
        bar.style.width = progress + '%';
        pct.textContent = Math.floor(progress) + '%';
      }, 160 + Math.random()*140);
    });
  }

  // Обработчики выбора/перетаскивания
  chooseBtn.addEventListener('click', ()=> fileInput.click());
  fileInput.addEventListener('change', (e)=> {
    simulateUpload(e.target.files);
    // обнуляем input чтобы можно было выбрать те же файлы снова
    e.target.value = '';
  });

  // Драг-н-дроп
  ['dragenter','dragover','dragleave','drop'].forEach(ev=>{
    dropzone.addEventListener(ev, (e)=>{
      e.preventDefault();
      e.stopPropagation();
    });
  });
  dropzone.addEventListener('drop', (e)=>{
    const dt = e.dataTransfer;
    if(dt && dt.files && dt.files.length) simulateUpload(dt.files);
  });

  // Поиск
  searchInput.addEventListener('input', ()=> renderFiles(searchInput.value));
  clearSearch.addEventListener('click', ()=> {searchInput.value=''; renderFiles('');});

  // Кнопка создания публичной ссылки (демо)
  publicLinkBtn.addEventListener('click', ()=>{
    if(files.length === 0){
      toast('Нет файлов для ссылки.');
      return;
    }
    const sample = files.slice(0,3).map(f=>makeFakeLink(f.id)).join('\n');
    linkArea.textContent = sample;
    toast('Публичные ссылки созданы (демо).');
  });

  // Сброс: очищаем демо-хранилище
  resetBtn.addEventListener('click', ()=>{
    if(confirm('Очистить все демонстрационные файлы? (это действие только для демо)')){
      files = [];
      renderFiles();
      linkArea.textContent = '';
      toast('Демонстрационные данные удалены.');
    }
  });

  // Темы
  themeSwitch.addEventListener('change', (e) => {
    const v = e.target.value;
    document.documentElement.setAttribute('data-theme', v === 'light' ? 'light' : 'dark');
  });

  // Инициализация: добавляем пару фиктивных файлов для примера
  (function seedDemo(){
    const sample = [
      {name:'product-roadmap.pdf', size: 2_048_000, type:'application/pdf'},
      {name:'holiday_photos.zip', size: 42_000_000, type:'application/zip'},
      {name:'design.sketch', size: 6_430_000, type:'application/octet-stream'}
    ];
    sample.forEach(s=> addFile(s));
  })();

  // Помощь для доступности: клавиатурная активация dropzone
  dropzone.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' || e.key === ' '){ fileInput.click(); e.preventDefault(); }
  });

  // Инициалный рендер
  renderFiles();

})();
</script>
</body>
</html>
